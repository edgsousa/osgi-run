plugins {
    id 'java'
    id 'org.dm.bundle' version '0.10.0'
}

apply plugin: 'com.athaydes.osgi-run'

repositories {
    jcenter()
    mavenLocal()
}

dependencies {
    compileOnly 'org.osgi:org.osgi.core:6.0.0'
    compileOnly "org.osgi:org.osgi.service.component.annotations:1.3.0"

    testCompile 'junit:junit:4.12'
    testCompile project( ':osgi-run-test-runner:osgi-run-test-runner-api' )
    testRuntime project( ':osgi-run-test-runner:osgi-run-protobuf-test-runner' )
    osgiRunTest project( ':osgi-run-test-runner:osgi-run-test-runner-bundle' )
    testRuntime 'org.slf4j:slf4j-simple:1.6.6'
}

bundle {
    instructions << [
            'Export-Package': '*',
            '-dsannotations': '*'
    ]
}

runOsgi {
    bundles += [ project ]
    config += [ 'org.osgi.framework.system.packages.extra': 'sun.misc' ]

}
